---
id: create-dedicated-sql-builder-for
level: task
title: "Create dedicated SQL builder for WRITE clauses (CREATE/SET/DELETE/REMOVE)"
short_code: "GQLITE-T-0064"
created_at: 2025-12-27T17:07:04.922746+00:00
updated_at: 2025-12-27T17:07:04.922746+00:00
parent: GQLITE-I-0025
blocked_by: []
archived: false

tags:
  - "#task"
  - "#phase/todo"


exit_criteria_met: false
strategy_id: NULL
initiative_id: GQLITE-I-0025
---

# Create dedicated SQL builder for WRITE clauses (CREATE/SET/DELETE/REMOVE)

## Priority: LOW (Optional Enhancement)

The unified SQL builder initiative is complete for READ queries. This task tracks optional future work to apply similar patterns to WRITE queries.

## Parent Initiative

[[GQLITE-I-0025]]

## Objective

Create a dedicated builder pattern for SQL INSERT/UPDATE/DELETE statements generated by Cypher WRITE clauses, replacing direct `append_sql()` usage with structured clause assembly.

## Current State

WRITE clauses currently use `append_sql()` directly (45 total calls):
- `transform_set.c` - 18 calls
- `transform_create.c` - 14 calls
- `transform_remove.c` - 7 calls
- `transform_delete.c` - 6 calls

These generate INSERT/UPDATE/DELETE SQL which has different patterns than SELECT queries.

## Acceptance Criteria

- [ ] Create `write_builder` struct for INSERT/UPDATE/DELETE
- [ ] Migrate `transform_create.c` to use write builder
- [ ] Migrate `transform_set.c` to use write builder
- [ ] Migrate `transform_delete.c` to use write builder  
- [ ] Migrate `transform_remove.c` to use write builder
- [ ] All existing tests pass
- [ ] No regressions in WRITE query functionality

## Implementation Notes

### Technical Approach

WRITE queries generate different SQL patterns than READ queries:
- CREATE → INSERT INTO
- SET → UPDATE with subqueries
- DELETE → DELETE with subqueries
- REMOVE → UPDATE (set to NULL)

A dedicated `write_builder` could provide:
- `write_insert(table, columns, values)`
- `write_update(table, set_clause, where)`
- `write_delete(table, where)`

### Why This Is Optional

The current `append_sql()` approach:
- Works correctly (all tests pass)
- Is straightforward for WRITE operations
- Doesn't have the clause-ordering complexity that READ queries have

The main benefit would be consistency with the READ query pattern.

## Status Updates

*Optional future work - no immediate timeline*